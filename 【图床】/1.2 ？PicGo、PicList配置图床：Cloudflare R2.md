
---
ç›®å½•ï¼šã€ã€ã€Obsidianæ€»è§ˆã€‘ã€‘ã€‘| å›¾åºŠ | [[1 å›¾åºŠå·¥å…·ï¼šPicGoã€PicList]]
ä¸Šä¸€é¡µï¼š
ä¸‹ä¸€é¡µï¼š
å…³é”®è¯ï¼š
ç›¸å…³é“¾æ¥ï¼š

---

![image.png](https://repo.in4cell.com/2026/01/13_7983254d38440cfe52e206f598cd9644.png)

ç¤ºä¾‹ï¼š
https://repo.in4cell.com/2026/01/13_00f603d1e6cd31383c99a8502f23d7c3.png
https://pub-895ade851e004cc6b33e03eaf136b94e.r2.dev/2026/01/13_00f603d1e6cd31383c99a8502f23d7c3.png

è®¾ç½®ä¸Šä¼ è·¯å¾„æ¨¡æ¿ï¼š
https://piclist.cn/configure.html#%E5%86%85%E7%BD%AEaws-s3

| payload         | æè¿°            |
| --------------- | ------------- |
| `{year}`        | å½“å‰æ—¥æœŸ - å¹´      |
| `{month}`       | å½“å‰æ—¥æœŸ - æœˆ      |
| `{day}`         | å½“å‰æ—¥æœŸ - æ—¥      |
| `{fullName}`    | å®Œæ•´æ–‡ä»¶åï¼ˆå«æ‰©å±•åï¼‰   |
| `{fileName}`    | æ–‡ä»¶åï¼ˆä¸å«æ‰©å±•åï¼‰    |
| `{extName}`     | æ‰©å±•åï¼ˆä¸å«.ï¼‰      |
| `{md5}`         | å›¾ç‰‡ MD5 è®¡ç®—å€¼    |
| `{sha1}`        | å›¾ç‰‡ SHA1 è®¡ç®—å€¼   |
| `{sha256}`      | å›¾ç‰‡ SHA256 è®¡ç®—å€¼ |
| `{timestamp}`   | Unix æ—¶é—´æˆ³      |
| `{timestampMS}` | Unix æ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰  |

```
{year}/{month}/{day}_{md5}.{extName}
```


# åˆ›å»ºR2å­˜å‚¨æ¡¶ï¼ˆéœ€é…ç½®ä¿¡ç”¨å¡æˆ–Paypalè´¦æˆ·ï¼ï¼‰

![image.png](https://repo.in4cell.com/2026/01/13_1768333436667.png)

# åˆ›å»ºå®Œå­˜å‚¨æ¡¶åï¼Œå³å¯ä¸Šä¼ æ–‡ä»¶äº†

![image.png](https://repo.in4cell.com/2026/01/13_1768333467020.png)

# S3 API endpointè®¿é—®ä¸Šä¼ çš„æ–‡ä»¶ï¼ˆæ³¨æ„ï¼šä¸æ˜¯æµè§ˆå™¨ç›´æ¥è®¿é—®ï¼å³ä¸èƒ½å…¬å¼€è®¿é—®ï¼ï¼‰

```
https://<Account ID>.r2.cloudflarestorage.com/<Bucket>/<Object Key>
<Object Key>=<æ–‡ä»¶å¤¹>/<æ–‡ä»¶å>
```

# PicGoå®‰è£… R2 æ’ä»¶å¹¶é…ç½®ï¼špicgo-plugin-cloudflare-r2

|å‚æ•°|æ¥æº|
|---|---|
|Access Key ID|R2 â†’ Tokens|
|Secret Access Key|åŒä¸Š|
|Bucket å|R2 bucket å|
|Endpoint|R2 â†’ â€œS3 API endpointâ€|
|Public URLï¼ˆå¯é€‰ï¼‰|è‡ªå®šä¹‰åŸŸå æˆ– R2 å…¬ç½‘åœ°å€|

# PicListçš„S3 å…¼å®¹æ¨¡å¼çš„é…ç½®

ğŸ”¹ PicList åŸºäº PicGo æ ¸å¿ƒå¼€å‘ï¼Œå¹¶å…¼å®¹ PicGo æ’ä»¶ç”Ÿæ€ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒé€šè¿‡ **S3 åè®®æ–¹å¼æ¥é…ç½®å¯¹è±¡å­˜å‚¨**ï¼Œè¿™æ„å‘³ç€åªè¦æœåŠ¡å…¼å®¹ AWS S3 API å°±èƒ½é…ç½®ä½¿ç”¨ï¼ŒåŒ…æ‹¬ Cloudflare R2ã€‚

PicListé€‰æ‹©`Amazon S3`å›¾åºŠï¼Œå¹¶å¡«å†™ S3 å‚æ•°
è®¾ç½® â†’ å›¾åºŠè®¾ç½® â†’ æ·»åŠ å›¾åºŠ â†’ é€‰æ‹©ï¼š**Amazon S3**

| å­—æ®µ          | å¡«å†™å†…å®¹                            |
| ----------- | ------------------------------- |
| AccessKey   | R2 ç”Ÿäº§çš„ Access Key               |
| SecretKey   | R2 çš„ Secret Key                 |
| Bucket      | R2 bucket å                     |
| Endpoint    | R2 çš„ S3 Endpoint                |
| Region      | R2 ä¸æ£€æŸ¥ Regionï¼å¯å¡«å†™ `auto` æˆ–ä»»æ„æœ‰æ•ˆå€¼ |
| åŸŸåï¼ˆCDN URLï¼‰ | å¦‚æœç»‘å®šäº†è‡ªå®šä¹‰åŸŸååˆ™å¡«è¿™ä¸ª                  |


# æµè§ˆå™¨å…¬å¼€è®¿é—®æ–¹å¼ä¸€ï¼šè®¾ç½®R2å­˜å‚¨æ¡¶ä¸ºå…¬å¼€ï¼ˆä¸´æ—¶å¼€å‘æµ‹è¯•ï¼Œå¯èƒ½æœ‰é™åˆ¶ï¼ï¼‰

```
https://pub-<Account ID>.r2.dev/<Object Key>
```

# æµè§ˆå™¨è®¿é—®å…¬å¼€æ–¹å¼äºŒï¼šè®¾ç½®è‡ªå®šä¹‰åŸŸåï¼ˆæ¨èåšæ³•ï¼ï¼‰

## ç™»å½•Cloudflareï¼Œæ·»åŠ åŸŸå

å¯ä»¥æ˜¯åœ¨å…¶å®ƒåŸŸåæ³¨å†Œå•†çš„åŸŸåï¼Œä¹Ÿå¯ä»¥æ˜¯åœ¨Cloudflareä¸­æ–°è´­ä¹°æˆ–å·²è´­ä¹°çš„åŸŸå

> æ³¨æ„ï¼šCloudflareé¦–å¹´+renewæ˜¯å…¨ç½‘æœ€ä¾¿å®œï¼ï¼ï¼

![image.png](https://repo.in4cell.com/2026/01/13_29a02f9faf1e0aaf2add63aaa0253dcd.png)


![image.png](https://repo.in4cell.com/2026/01/13_bac063e21e9b444cda694faf8b29aa01.png)


## åœ¨åŸŸåæ³¨å†Œå•†æ·»åŠ åŸŸåæœåŠ¡å™¨
![image.png](https://repo.in4cell.com/2026/01/13_65e5603519507019fa8e9cdb48aa22f3.png)

## ä¸ºR2å­˜å‚¨æ¡¶ç»‘å®šè‡ªå®šä¹‰åŸŸåï¼ˆä¹Ÿå¯ä»¥å­åŸŸåï¼‰ï¼Œç„¶åå°±å¯å…¬å¼€è®¿é—®äº†

![image.png](https://repo.in4cell.com/2026/01/13_ac78525a39c32aa40faf0970f3876203.png)

![image.png](https://repo.in4cell.com/2026/01/13_fe3e6541a6439dd5c87ccdcd96b9a65c.png)

## è®¾ç½®è¯¥åŸŸåçš„CDNç¼“å­˜ï¼Œå‡å°‘è¯»å–æ¬¡æ•°å’Œè´¹ç”¨ï¼

åŸŸå=ã€‹è¯¥åŸŸå=ã€‹ç¼“å­˜=ã€‹ç¼“å­˜è§„åˆ™=ã€‹åˆ›å»ºè§„åˆ™ï¼š
![image.png](https://repo.in4cell.com/2026/01/13_2ae5a55060f9ae655f2407955acb3c77.png)

![image.png](https://repo.in4cell.com/2026/01/13_f36c991f29f13cf0534a8decdd76f776.png)

![image.png](https://repo.in4cell.com/2026/01/13_6b21894d23b6c012eb18ca20ac3510bd.png)

# è·å–API Tokens

![image.png](https://repo.in4cell.com/2026/01/13_a809ca70f7f8e2073e5b1fbcfdf1f4d0.png)

![image.png](https://repo.in4cell.com/2026/01/13_43891fe95d2f1216d09754f30ee3faa4.png)

![image.png](https://repo.in4cell.com/2026/01/13_af3c21de628a3cf4947b4cf2f4ffa6db.png)

![image.png](https://repo.in4cell.com/2026/01/13_00f603d1e6cd31383c99a8502f23d7c3.png)
> æ³¨æ„ï¼šFor security reasons, these token values will not be shown againï¼


# ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ**é˜²ç›—é“¾**ï¼šé…ç½®Refereræˆ–IPé™åˆ¶ï¼Œé˜²æ­¢ä»–äººç›—ç”¨å›¾ç‰‡æµé‡


# æ‰¹é‡ä¸‹è½½å­˜å‚¨æ¡¶å¯¹è±¡ï¼ˆè„šæœ¬æ˜¯å”¯ä¸€å¯è¡Œçš„æ–¹æ¡ˆï¼ï¼‰

è¿™æ˜¯æ‰¹é‡ä¸‹è½½æ‰€æœ‰å¯¹è±¡çš„æœ€ä½³æ–¹å¼ï¼Œé€‚ç”¨äºå¤§å‹å­˜å‚¨æ¡¶ã€‚Â 

1. **å®‰è£… SDK**: ä¾‹å¦‚ Python ç”¨æˆ·çš„Â `boto3`Â åº“ã€‚
2. **é…ç½®å‡­è¯**: è·å– Cloudflare R2 API Tokenï¼Œå¹¶é…ç½® S3 å®¢æˆ·ç«¯ï¼Œå°† endpoint è®¾ç½®ä¸º R2 åŒºåŸŸã€‚
3. **åˆ—å‡ºå¯¹è±¡**: ä½¿ç”¨Â `list_objects_v2`Â æ¥å£ï¼Œä¼ å…¥ä½ çš„å­˜å‚¨æ¡¶åç§°ã€‚
4. **å¾ªç¯ä¸‹è½½**: éå†è¿”å›çš„å¯¹è±¡åˆ—è¡¨ï¼Œå¯¹æ¯ä¸ªå¯¹è±¡ä½¿ç”¨Â `download_file`Â æ–¹æ³•å°†å…¶ä¸‹è½½åˆ°æœ¬åœ°æŒ‡å®šç›®å½•ã€‚
    - _æç¤º_: è„šæœ¬ä¸­éœ€è¦å¤„ç†åˆ†é¡µï¼ˆPaginationï¼‰ï¼Œç¡®ä¿åˆ—å‡ºæ‰€æœ‰æ–‡ä»¶ã€‚Â 

**ç¤ºä¾‹ (Python Boto3 - æ¦‚å¿µ)**:

```python
import boto3

# æ›¿æ¢ä¸ºä½ çš„ R2 å‡­è¯å’Œç«¯ç‚¹
R2_ENDPOINT = 'https://<ACCOUNT_ID>.r2.cloudflarestorage.com'
R2_ACCESS_KEY_ID = 'YOUR_ACCESS_KEY_ID'
R2_SECRET_ACCESS_KEY = 'YOUR_SECRET_ACCESS_KEY'
BUCKET_NAME = 'your-bucket-name'
LOCAL_DOWNLOAD_PATH = './downloads'

s3 = boto3.client(
    's3',
    endpoint_url=R2_ENDPOINT,
    aws_access_key_id=R2_ACCESS_KEY_ID,
    aws_secret_access_key=R2_SECRET_ACCESS_KEY,
    region_name='auto' # R2 é€šå¸¸ä¸éœ€è¦æŒ‡å®šåŒºåŸŸï¼Œ'auto' æˆ–ç•™ç©º
)

paginator = s3.get_paginator('list_objects_v2')
pages = paginator.paginate(Bucket=BUCKET_NAME)

for page in pages:
    if 'Contents' in page:
        for obj in page['Contents']:
            key = obj['Key']
            local_file_path = f"{LOCAL_DOWNLOAD_PATH}/{key}"
            print(f"Downloading {key} to {local_file_path}")
            # ç¡®ä¿ç›®å½•å­˜åœ¨
            os.makedirs(os.path.dirname(local_file_path), exist_ok=True)
            s3.download_file(BUCKET_NAME, key, local_file_path)

```


---
# ã€å‚è€ƒã€‘
[Cloudflare+R2+PicList æ­å»ºæ°¸ä¹…å…è´¹å›¾åºŠ, åŠ é€Ÿå…¨çƒç½‘é€Ÿè®¿é—® è¯¦ç»†æ•™ç¨‹](https://www.youtube.com/watch?v=lTcONIrZr9Y)
[ä¸ªäººå›¾åºŠæœ€ä½³æ–¹æ¡ˆï¼šCloudflare R2 + PicGoï¼å…è´¹ã€ç¨³å®šã€å›½å†…+å›½å¤–ç½‘ç»œåŒå‘äº’é€šï¼](https://www.youtube.com/watch?v=9LdSQPgz9w8)

